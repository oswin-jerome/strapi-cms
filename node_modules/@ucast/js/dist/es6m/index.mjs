import{ITSELF as r,createInterpreter as t}from"@ucast/core";function e(r,t,e){for(let n=0,o=r.length;n<o;n++)if(0===e(r[n],t))return!0;return!1}function n(r,t){return Array.isArray(r)&&Number.isNaN(Number(t))}function o(r,t,e){if(!n(r,t))return e(r,t);let o=[];for(let n=0;n<r.length;n++){const u=e(r[n],t);void 0!==u&&(o=o.concat(u))}return o}function u(r){return(t,e,n)=>{const o=n.get(e,t.field);return Array.isArray(o)?o.some(e=>r(t,e,n)):r(t,o,n)}}const c=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty),i=(r,t)=>r[t];function f(r,t,e){const n=t.lastIndexOf(".");return-1===n?[r,t]:[e(r,t.slice(0,n)),t.slice(n+1)]}function s(t,e,n=i){if(e===r)return t;if(!t)throw new Error(`Unable to get field "${e}" out of ${String(t)}.`);return function(r,t,e){if(-1===t.indexOf("."))return o(r,t,e);const n=t.split(".");let u=r;for(let r=0,t=n.length;r<t;r++)if(u=o(u,n[r],e),!u||"object"!=typeof u)return r<t-1?void 0:u;return u}(t,e,n)}function a(r){return(t,e)=>s(t,e,r)}function l(r,t){return r===t?0:r>t?1:-1}function p(r,e={}){return t(r,Object.assign({get:s,compare:l},e))}const g=(r,t,{interpret:e})=>r.value.some(r=>e(r,t)),b=(r,t,e)=>!g(r,t,e),m=(r,t,{interpret:e})=>r.value.every(r=>e(r,t)),y=(r,t,{interpret:e})=>!e(r.value[0],t),j=(r,t,{compare:n,get:o})=>{const u=o(t,r.field);return Array.isArray(u)&&!Array.isArray(r.value)?e(u,r.value,n):0===n(u,r.value)},A=(r,t,e)=>!j(r,t,e),d=u((r,t,e)=>{const n=e.compare(t,r.value);return 0===n||-1===n}),O=u((r,t,e)=>-1===e.compare(t,r.value)),h=u((r,t,e)=>1===e.compare(t,r.value)),v=u((r,t,e)=>{const n=e.compare(t,r.value);return 0===n||1===n}),w=(t,e,{get:o})=>{if(t.field===r)return void 0!==e;const[u,i]=f(e,t.field,o),s=r=>null==r?Boolean(r)===t.value:c(r,i)===t.value;return n(u,i)?u.some(s):s(u)},_=u((r,t)=>"number"==typeof t&&t%r.value[0]===r.value[1]),x=(t,e,{get:o})=>{const[u,c]=f(e,t.field,o),i=r=>{const e=o(r,c);return Array.isArray(e)&&e.length===t.value};return t.field!==r&&n(u,c)?u.some(i):i(u)},N=u((r,t)=>"string"==typeof t&&r.value.test(t)),$=u((r,t,{compare:n})=>e(r.value,t,n)),q=(r,t,e)=>!$(r,t,e),z=(r,t,{compare:n,get:o})=>{const u=o(t,r.field);return Array.isArray(u)&&r.value.every(r=>e(u,r,n))},B=(r,t,{interpret:e,get:n})=>{const o=n(t,r.field);return Array.isArray(o)&&o.some(t=>e(r.value,t))},E=(r,t)=>r.value.call(t);var M=Object.freeze({__proto__:null,or:g,nor:b,and:m,not:y,eq:j,ne:A,lte:d,lt:O,gt:h,gte:v,exists:w,mod:_,size:x,regex:N,within:$,nin:q,all:z,elemMatch:B,where:E});const S=Object.assign({},M,{in:$}),U=p(S);export{z as all,S as allInterpreters,m as and,l as compare,a as createGetter,p as createJsInterpreter,B as elemMatch,j as eq,w as exists,s as getObjectField,f as getObjectFieldCursor,h as gt,v as gte,U as interpret,O as lt,d as lte,_ as mod,A as ne,q as nin,b as nor,y as not,g as or,N as regex,x as size,E as where,$ as within};
//# sourceMappingURL=index.mjs.map
