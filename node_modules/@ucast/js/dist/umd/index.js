!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@ucast/core")):"function"==typeof define&&define.amd?define(["exports","@ucast/core"],n):n(((r=r||self).ucast=r.ucast||{},r.ucast.js={}),r.ucast.core)}(this,(function(r,n){"use strict";function t(r,n,t){for(var e=0,u=r.length;e<u;e++)if(0===t(r[e],n))return!0;return!1}function e(r,n){return Array.isArray(r)&&Number.isNaN(Number(n))}function u(r,n,t){if(!e(r,n))return t(r,n);for(var u=[],o=0;o<r.length;o++){var i=t(r[o],n);void 0!==i&&(u=u.concat(i))}return u}function o(r){return function(n,t,e){var u=e.get(t,n.field);return Array.isArray(u)?u.some((function(t){return r(n,t,e)})):r(n,u,e)}}var i=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function f(){return(f=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r}).apply(this,arguments)}var c=function(r,n){return r[n]};function a(r,n,t){var e=n.lastIndexOf(".");return-1===e?[r,n]:[t(r,n.slice(0,e)),n.slice(e+1)]}function v(r,t,e){if(void 0===e&&(e=c),t===n.ITSELF)return r;if(!r)throw new Error('Unable to get field "'+t+'" out of '+String(r)+".");return function(r,n,t){if(-1===n.indexOf("."))return u(r,n,t);for(var e=n.split("."),o=r,i=0,f=e.length;i<f;i++)if(!(o=u(o,e[i],t))||"object"!=typeof o)return i<f-1?void 0:o;return o}(r,t,e)}function l(r,n){return r===n?0:r>n?1:-1}function d(r,t){return void 0===t&&(t={}),n.createInterpreter(r,f({get:v,compare:l},t))}var s=function(r,n,t){var e=t.interpret;return r.value.some((function(r){return e(r,n)}))},b=function(r,n,t){return!s(r,n,t)},y=function(r,n,t){var e=t.interpret;return r.value.every((function(r){return e(r,n)}))},p=function(r,n,t){return!(0,t.interpret)(r.value[0],n)},j=function(r,n,e){var u=e.compare,o=(0,e.get)(n,r.field);return Array.isArray(o)&&!Array.isArray(r.value)?t(o,r.value,u):0===u(o,r.value)},g=function(r,n,t){return!j(r,n,t)},m=o((function(r,n,t){var e=t.compare(n,r.value);return 0===e||-1===e})),A=o((function(r,n,t){return-1===t.compare(n,r.value)})),O=o((function(r,n,t){return 1===t.compare(n,r.value)})),h=o((function(r,n,t){var e=t.compare(n,r.value);return 0===e||1===e})),_=function(r,t,u){var o=u.get;if(r.field===n.ITSELF)return void 0!==t;var f=a(t,r.field,o),c=f[0],v=f[1],l=function(n){return null==n?Boolean(n)===r.value:i(n,v)===r.value};return e(c,v)?c.some(l):l(c)},x=o((function(r,n){return"number"==typeof n&&n%r.value[0]===r.value[1]})),w=function(r,t,u){var o=u.get,i=a(t,r.field,o),f=i[0],c=i[1],v=function(n){var t=o(n,c);return Array.isArray(t)&&t.length===r.value};return r.field!==n.ITSELF&&e(f,c)?f.some(v):v(f)},q=o((function(r,n){return"string"==typeof n&&r.value.test(n)})),M=o((function(r,n,e){var u=e.compare;return t(r.value,n,u)})),N=function(r,n,t){return!M(r,n,t)},z=function(r,n,e){var u=e.compare,o=(0,e.get)(n,r.field);return Array.isArray(o)&&r.value.every((function(r){return t(o,r,u)}))},B=function(r,n,t){var e=t.interpret,u=(0,t.get)(n,r.field);return Array.isArray(u)&&u.some((function(n){return e(r.value,n)}))},E=function(r,n){return r.value.call(n)},S=f({},Object.freeze({__proto__:null,or:s,nor:b,and:y,not:p,eq:j,ne:g,lte:m,lt:A,gt:O,gte:h,exists:_,mod:x,size:w,regex:q,within:M,nin:N,all:z,elemMatch:B,where:E}),{in:M}),U=d(S);r.all=z,r.allInterpreters=S,r.and=y,r.compare=l,r.createGetter=function(r){return function(n,t){return v(n,t,r)}},r.createJsInterpreter=d,r.elemMatch=B,r.eq=j,r.exists=_,r.getObjectField=v,r.getObjectFieldCursor=a,r.gt=O,r.gte=h,r.interpret=U,r.lt=A,r.lte=m,r.mod=x,r.ne=g,r.nin=N,r.nor=b,r.not=p,r.or=s,r.regex=q,r.size=w,r.where=E,r.within=M,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
