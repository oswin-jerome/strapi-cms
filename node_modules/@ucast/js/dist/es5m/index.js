import{ITSELF as r,createInterpreter as n}from"@ucast/core";function t(r,n,t){for(var u=0,e=r.length;u<e;u++)if(0===t(r[u],n))return!0;return!1}function u(r,n){return Array.isArray(r)&&Number.isNaN(Number(n))}function e(r,n,t){if(!u(r,n))return t(r,n);for(var e=[],o=0;o<r.length;o++){var i=t(r[o],n);void 0!==i&&(e=e.concat(i))}return e}function o(r){return function(n,t,u){var e=u.get(t,n.field);return Array.isArray(e)?e.some((function(t){return r(n,t,u)})):r(n,e,u)}}var i=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function f(){return(f=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(r[u]=t[u])}return r}).apply(this,arguments)}var c=function(r,n){return r[n]};function a(r,n,t){var u=n.lastIndexOf(".");return-1===u?[r,n]:[t(r,n.slice(0,u)),n.slice(u+1)]}function v(n,t,u){if(void 0===u&&(u=c),t===r)return n;if(!n)throw new Error('Unable to get field "'+t+'" out of '+String(n)+".");return function(r,n,t){if(-1===n.indexOf("."))return e(r,n,t);for(var u=n.split("."),o=r,i=0,f=u.length;i<f;i++)if(!(o=e(o,u[i],t))||"object"!=typeof o)return i<f-1?void 0:o;return o}(n,t,u)}function l(r){return function(n,t){return v(n,t,r)}}function b(r,n){return r===n?0:r>n?1:-1}function y(r,t){return void 0===t&&(t={}),n(r,f({get:v,compare:b},t))}var d=function(r,n,t){var u=t.interpret;return r.value.some((function(r){return u(r,n)}))},m=function(r,n,t){return!d(r,n,t)},g=function(r,n,t){var u=t.interpret;return r.value.every((function(r){return u(r,n)}))},j=function(r,n,t){return!(0,t.interpret)(r.value[0],n)},p=function(r,n,u){var e=u.compare,o=(0,u.get)(n,r.field);return Array.isArray(o)&&!Array.isArray(r.value)?t(o,r.value,e):0===e(o,r.value)},A=function(r,n,t){return!p(r,n,t)},s=o((function(r,n,t){var u=t.compare(n,r.value);return 0===u||-1===u})),O=o((function(r,n,t){return-1===t.compare(n,r.value)})),h=o((function(r,n,t){return 1===t.compare(n,r.value)})),w=o((function(r,n,t){var u=t.compare(n,r.value);return 0===u||1===u})),_=function(n,t,e){var o=e.get;if(n.field===r)return void 0!==t;var f=a(t,n.field,o),c=f[0],v=f[1],l=function(r){return null==r?Boolean(r)===n.value:i(r,v)===n.value};return u(c,v)?c.some(l):l(c)},x=o((function(r,n){return"number"==typeof n&&n%r.value[0]===r.value[1]})),N=function(n,t,e){var o=e.get,i=a(t,n.field,o),f=i[0],c=i[1],v=function(r){var t=o(r,c);return Array.isArray(t)&&t.length===n.value};return n.field!==r&&u(f,c)?f.some(v):v(f)},q=o((function(r,n){return"string"==typeof n&&r.value.test(n)})),z=o((function(r,n,u){var e=u.compare;return t(r.value,n,e)})),B=function(r,n,t){return!z(r,n,t)},E=function(r,n,u){var e=u.compare,o=(0,u.get)(n,r.field);return Array.isArray(o)&&r.value.every((function(r){return t(o,r,e)}))},M=function(r,n,t){var u=t.interpret,e=(0,t.get)(n,r.field);return Array.isArray(e)&&e.some((function(n){return u(r.value,n)}))},S=function(r,n){return r.value.call(n)},U=f({},Object.freeze({__proto__:null,or:d,nor:m,and:g,not:j,eq:p,ne:A,lte:s,lt:O,gt:h,gte:w,exists:_,mod:x,size:N,regex:q,within:z,nin:B,all:E,elemMatch:M,where:S}),{in:z}),k=y(U);export{E as all,U as allInterpreters,g as and,b as compare,l as createGetter,y as createJsInterpreter,M as elemMatch,p as eq,_ as exists,v as getObjectField,a as getObjectFieldCursor,h as gt,w as gte,k as interpret,O as lt,s as lte,x as mod,A as ne,B as nin,m as nor,j as not,d as or,q as regex,N as size,S as where,z as within};
//# sourceMappingURL=index.js.map
